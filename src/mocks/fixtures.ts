import { 
  User, Organization, Project, Phase, Task, Deliverable, 
  Report, KPI, LogAuditoria, AuthResponse,
  UserStatus, OrganizationPlan, OrganizationStatus,
  ProjectType, ProjectStatus, PhaseStatus, TaskStatus, 
  TaskPriority, DeliverableStatus, ReportType, 
  KPICategory, AuditSeverity, Role
} from '@/types'
import { addDays, addWeeks, subDays, subWeeks } from 'date-fns'

// Users (DrimSoft Staff)
export const mockUsers: User[] = [
  {
    id: '1',
    name: 'Ana García',
    email: 'ana.garcia@drimsoft.com',
    photoURL: 'https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?w=150',
    status: UserStatus.ACTIVO,
    role: Role.ADMIN_DRIMSOFT,
    createdAt: subDays(new Date(), 180),
    updatedAt: new Date(),
  },
  {
    id: '2',
    name: 'Carlos Mendez',
    email: 'carlos.mendez@drimsoft.com',
    photoURL: 'https://images.pexels.com/photos/697509/pexels-photo-697509.jpeg?w=150',
    status: UserStatus.ACTIVO,
    role: Role.ADMIN_DRIMSOFT,
    createdAt: subDays(new Date(), 150),
    updatedAt: new Date(),
  },
  {
    id: '3',
    name: 'Elena Rodriguez',
    email: 'elena.rodriguez@drimsoft.com',
    status: UserStatus.ACTIVO,
    role: Role.ADMIN_DRIMSOFT,
    createdAt: subDays(new Date(), 120),
    updatedAt: new Date(),
  },
]

// Universities (Organizations)
export const mockOrganizations: Organization[] = [
  {
    id: '1',
    name: 'Pontificia Universidad Javeriana',
    address: 'Carrera 7 No. 40-62, Bogotá, Colombia',
    phone: '+57 (1) 320 8320',
    domain: 'javeriana.edu.co',
    plan: OrganizationPlan.ENTERPRISE,
    status: OrganizationStatus.ACTIVA,
    adminCount: 8,
    projectCount: 456,
    mau: 2847,
    createdAt: subDays(new Date(), 365),
    updatedAt: new Date(),
  },
  {
    id: '2',
    name: 'Universidad del Rosario',
    address: 'Carrera 6 No. 12C-13, Bogotá, Colombia',
    phone: '+57 (1) 297 0200',
    domain: 'urosario.edu.co',
    plan: OrganizationPlan.ENTERPRISE,
    status: OrganizationStatus.ACTIVA,
    adminCount: 6,
    projectCount: 623,
    mau: 3200,
    createdAt: subDays(new Date(), 300),
    updatedAt: new Date(),
  },
  {
    id: '3',
    name: 'Universidad de los Andes',
    address: 'Carrera 1 No. 18A-12, Bogotá, Colombia',
    phone: '+57 (1) 339 4949',
    domain: 'uniandes.edu.co',
    plan: OrganizationPlan.PRO,
    status: OrganizationStatus.ACTIVA,
    adminCount: 5,
    projectCount: 387,
    mau: 2156,
    createdAt: subDays(new Date(), 280),
    updatedAt: new Date(),
  },
  {
    id: '4',
    name: 'Universidad Nacional de Colombia',
    address: 'Carrera 30 No. 45-03, Bogotá, Colombia',
    phone: '+57 (1) 316 5000',
    domain: 'unal.edu.co',
    plan: OrganizationPlan.BASIC,
    status: OrganizationStatus.ACTIVA,
    adminCount: 3,
    projectCount: 298,
    mau: 1890,
    createdAt: subDays(new Date(), 60),
    updatedAt: new Date(),
  },
  {
    id: '5',
    name: 'Universidad Externado de Colombia',
    address: 'Calle 12 No. 1-17 Este, Bogotá, Colombia',
    phone: '+57 (1) 342 0288',
    domain: 'uexternado.edu.co',
    plan: OrganizationPlan.PRO,
    status: OrganizationStatus.ACTIVA,
    adminCount: 4,
    projectCount: 234,
    mau: 1650,
    createdAt: subDays(new Date(), 200),
    updatedAt: new Date(),
  },
  {
    id: '6',
    name: 'Universidad de La Sabana',
    address: 'Campus del Puente del Común, Km. 7, Autopista Norte de Bogotá',
    phone: '+57 (1) 861 5555',
    domain: 'unisabana.edu.co',
    plan: OrganizationPlan.ENTERPRISE,
    status: OrganizationStatus.ACTIVA,
    adminCount: 7,
    projectCount: 189,
    mau: 2100,
    createdAt: subDays(new Date(), 400),
    updatedAt: new Date(),
  },
  {
    id: '7',
    name: 'Universidad del Norte',
    address: 'Km. 5 Vía Puerto Colombia, Barranquilla, Colombia',
    phone: '+57 (5) 350 9509',
    domain: 'uninorte.edu.co',
    plan: OrganizationPlan.PRO,
    status: OrganizationStatus.ACTIVA,
    adminCount: 5,
    projectCount: 156,
    mau: 1800,
    createdAt: subDays(new Date(), 250),
    updatedAt: new Date(),
  },
  {
    id: '8',
    name: 'Universidad EAFIT',
    address: 'Carrera 49 No. 7 Sur-50, Medellín, Colombia',
    phone: '+57 (4) 261 9500',
    domain: 'eafit.edu.co',
    plan: OrganizationPlan.PRO,
    status: OrganizationStatus.ACTIVA,
    adminCount: 4,
    projectCount: 178,
    mau: 1450,
    createdAt: subDays(new Date(), 180),
    updatedAt: new Date(),
  },
  {
    id: '9',
    name: 'Universidad ICESI',
    address: 'Calle 18 No. 122-135, Cali, Colombia',
    phone: '+57 (2) 555 2334',
    domain: 'icesi.edu.co',
    plan: OrganizationPlan.ENTERPRISE,
    status: OrganizationStatus.ACTIVA,
    adminCount: 6,
    projectCount: 145,
    mau: 1200,
    createdAt: subDays(new Date(), 320),
    updatedAt: new Date(),
  },
  {
    id: '10',
    name: 'Universidad de Antioquia',
    address: 'Calle 67 No. 53-108, Medellín, Colombia',
    phone: '+57 (4) 219 8332',
    domain: 'udea.edu.co',
    plan: OrganizationPlan.BASIC,
    status: OrganizationStatus.PENDIENTE,
    adminCount: 2,
    projectCount: 89,
    mau: 850,
    createdAt: subDays(new Date(), 30),
    updatedAt: new Date(),
  },
  {
    id: '11',
    name: 'Universidad del Valle',
    address: 'Ciudad Universitaria Meléndez, Cali, Colombia',
    phone: '+57 (2) 321 2100',
    domain: 'univalle.edu.co',
    plan: OrganizationPlan.PRO,
    status: OrganizationStatus.ACTIVA,
    adminCount: 5,
    projectCount: 167,
    mau: 1950,
    createdAt: subDays(new Date(), 220),
    updatedAt: new Date(),
  },
  {
    id: '12',
    name: 'Universidad Tecnológica de Pereira',
    address: 'La Julita, Pereira, Risaralda, Colombia',
    phone: '+57 (6) 313 7300',
    domain: 'utp.edu.co',
    plan: OrganizationPlan.BASIC,
    status: OrganizationStatus.ACTIVA,
    adminCount: 3,
    projectCount: 98,
    mau: 750,
    createdAt: subDays(new Date(), 90),
    updatedAt: new Date(),
  },
  {
    id: '13',
    name: 'Universidad de Medellín',
    address: 'Carrera 87 No. 30-65, Medellín, Colombia',
    phone: '+57 (4) 340 5555',
    domain: 'udem.edu.co',
    plan: OrganizationPlan.ENTERPRISE,
    status: OrganizationStatus.ACTIVA,
    adminCount: 6,
    projectCount: 134,
    mau: 1650,
    createdAt: subDays(new Date(), 500),
    updatedAt: new Date(),
  },
  {
    id: '14',
    name: 'Universidad de Caldas',
    address: 'Calle 65 No. 26-10, Manizales, Colombia',
    phone: '+57 (6) 878 1500',
    domain: 'ucaldas.edu.co',
    plan: OrganizationPlan.PRO,
    status: OrganizationStatus.ACTIVA,
    adminCount: 4,
    projectCount: 112,
    mau: 920,
    createdAt: subDays(new Date(), 160),
    updatedAt: new Date(),
  },
  {
    id: '15',
    name: 'Universidad Industrial de Santander',
    address: 'Carrera 27 con Calle 9, Bucaramanga, Colombia',
    phone: '+57 (7) 634 4000',
    domain: 'uis.edu.co',
    plan: OrganizationPlan.BASIC,
    status: OrganizationStatus.SUSPENDIDA,
    adminCount: 2,
    projectCount: 67,
    mau: 0,
    createdAt: subDays(new Date(), 120),
    updatedAt: new Date(),
  },
]

// Academic Projects
export const mockProjects: Project[] = [
  {
    id: '1',
    name: 'Sistema de Gestión Académica Integral',
    description: 'Plataforma completa para la gestión de estudiantes, profesores y programas académicos',
    type: ProjectType.DESARROLLO,
    status: ProjectStatus.EN_CURSO,
    startDate: subDays(new Date(), 90),
    endDate: addDays(new Date(), 120),
    budget: 500000,
    cost: 320000,
    percentageBudgetExecution: 0.64,
    percentageProgress: 0.72,
    organizationId: '1',
    createdAt: subDays(new Date(), 90),
    updatedAt: new Date(),
  },
  {
    id: '2',
    name: 'Plataforma de Aprendizaje Virtual',
    description: 'Sistema LMS avanzado con herramientas de colaboración y evaluación',
    type: ProjectType.IMPLEMENTACION,
    status: ProjectStatus.EN_REVISION,
    startDate: subDays(new Date(), 150),
    endDate: addDays(new Date(), 30),
    budget: 750000,
    cost: 680000,
    percentageBudgetExecution: 0.91,
    percentageProgress: 0.95,
    organizationId: '2',
    createdAt: subDays(new Date(), 150),
    updatedAt: new Date(),
  },
  {
    id: '3',
    name: 'Sistema de Investigación y Publicaciones',
    description: 'Plataforma para gestión de proyectos de investigación y publicaciones académicas',
    type: ProjectType.DESARROLLO,
    status: ProjectStatus.EN_RIESGO,
    startDate: subDays(new Date(), 120),
    endDate: addDays(new Date(), 60),
    budget: 300000,
    cost: 280000,
    percentageBudgetExecution: 0.93,
    percentageProgress: 0.65,
    organizationId: '3',
    createdAt: subDays(new Date(), 120),
    updatedAt: new Date(),
  },
  {
    id: '4',
    name: 'App Móvil Estudiantil',
    description: 'Aplicación móvil para estudiantes con acceso a calificaciones, horarios y servicios',
    type: ProjectType.DESARROLLO,
    status: ProjectStatus.EN_CURSO,
    startDate: subDays(new Date(), 45),
    endDate: addDays(new Date(), 90),
    budget: 150000,
    cost: 65000,
    percentageBudgetExecution: 0.43,
    percentageProgress: 0.55,
    organizationId: '4',
    createdAt: subDays(new Date(), 45),
    updatedAt: new Date(),
  },
  {
    id: '5',
    name: 'Auditoría de Seguridad Informática',
    description: 'Evaluación completa de seguridad y cumplimiento normativo en sistemas académicos',
    type: ProjectType.CONSULTORIA,
    status: ProjectStatus.CERRADO,
    startDate: subDays(new Date(), 200),
    endDate: subDays(new Date(), 30),
    budget: 100000,
    cost: 95000,
    percentageBudgetExecution: 0.95,
    percentageProgress: 1.0,
    organizationId: '1',
    createdAt: subDays(new Date(), 200),
    updatedAt: subDays(new Date(), 30),
  },
  {
    id: '6',
    name: 'Plataforma de Análisis Académico',
    description: 'Sistema de business intelligence para análisis de rendimiento estudiantil y académico',
    type: ProjectType.DESARROLLO,
    status: ProjectStatus.EN_CURSO,
    startDate: subDays(new Date(), 100),
    endDate: addDays(new Date(), 80),
    budget: 800000,
    cost: 450000,
    percentageBudgetExecution: 0.56,
    percentageProgress: 0.68,
    organizationId: '6',
    createdAt: subDays(new Date(), 100),
    updatedAt: new Date(),
  },
  {
    id: '7',
    name: 'Integración de Sistemas Académicos',
    description: 'Unificación de múltiples sistemas académicos para gestión centralizada',
    type: ProjectType.IMPLEMENTACION,
    status: ProjectStatus.EN_REVISION,
    startDate: subDays(new Date(), 80),
    endDate: addDays(new Date(), 20),
    budget: 300000,
    cost: 280000,
    percentageBudgetExecution: 0.93,
    percentageProgress: 0.88,
    organizationId: '7',
    createdAt: subDays(new Date(), 80),
    updatedAt: new Date(),
  },
  {
    id: '8',
    name: 'Sistema de Gestión de Biblioteca Digital',
    description: 'Plataforma avanzada para gestión de recursos digitales y biblioteca virtual',
    type: ProjectType.DESARROLLO,
    status: ProjectStatus.EN_CURSO,
    startDate: subDays(new Date(), 60),
    endDate: addDays(new Date(), 120),
    budget: 400000,
    cost: 180000,
    percentageBudgetExecution: 0.45,
    percentageProgress: 0.42,
    organizationId: '8',
    createdAt: subDays(new Date(), 60),
    updatedAt: new Date(),
  },
  {
    id: '9',
    name: 'Campus Inteligente IoT',
    description: 'Implementación de sensores IoT para monitoreo y gestión inteligente del campus',
    type: ProjectType.IMPLEMENTACION,
    status: ProjectStatus.EN_CURSO,
    startDate: subDays(new Date(), 200),
    endDate: addDays(new Date(), 100),
    budget: 1200000,
    cost: 850000,
    percentageBudgetExecution: 0.71,
    percentageProgress: 0.75,
    organizationId: '9',
    createdAt: subDays(new Date(), 200),
    updatedAt: new Date(),
  },
  {
    id: '10',
    name: 'Portal de Admisiones Digital',
    description: 'Sistema completo para gestión de procesos de admisión estudiantil',
    type: ProjectType.DESARROLLO,
    status: ProjectStatus.NUEVO,
    startDate: new Date(),
    endDate: addDays(new Date(), 90),
    budget: 200000,
    cost: 0,
    percentageBudgetExecution: 0,
    percentageProgress: 0,
    organizationId: '10',
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: '11',
    name: 'Sistema de Gestión de Residencias',
    description: 'Plataforma integral para gestión de residencias estudiantiles y servicios',
    type: ProjectType.DESARROLLO,
    status: ProjectStatus.EN_CURSO,
    startDate: subDays(new Date(), 120),
    endDate: addDays(new Date(), 60),
    budget: 350000,
    cost: 220000,
    percentageBudgetExecution: 0.63,
    percentageProgress: 0.70,
    organizationId: '11',
    createdAt: subDays(new Date(), 120),
    updatedAt: new Date(),
  },
  {
    id: '12',
    name: 'Sistema de Inventario de Laboratorios',
    description: 'Gestión en tiempo real de equipos y recursos de laboratorios académicos',
    type: ProjectType.IMPLEMENTACION,
    status: ProjectStatus.EN_CURSO,
    startDate: subDays(new Date(), 45),
    endDate: addDays(new Date(), 45),
    budget: 150000,
    cost: 75000,
    percentageBudgetExecution: 0.50,
    percentageProgress: 0.55,
    organizationId: '12',
    createdAt: subDays(new Date(), 45),
    updatedAt: new Date(),
  },
  {
    id: '13',
    name: 'Migración a la Nube Académica',
    description: 'Migración completa de infraestructura académica a servicios en la nube',
    type: ProjectType.CONSULTORIA,
    status: ProjectStatus.EN_CURSO,
    startDate: subDays(new Date(), 300),
    endDate: addDays(new Date(), 180),
    budget: 2000000,
    cost: 1200000,
    percentageBudgetExecution: 0.60,
    percentageProgress: 0.65,
    organizationId: '13',
    createdAt: subDays(new Date(), 300),
    updatedAt: new Date(),
  },
  {
    id: '14',
    name: 'Plataforma de Monitoreo Ambiental',
    description: 'Sistema de sensores IoT para monitoreo ambiental del campus universitario',
    type: ProjectType.DESARROLLO,
    status: ProjectStatus.EN_CURSO,
    startDate: subDays(new Date(), 90),
    endDate: addDays(new Date(), 90),
    budget: 250000,
    cost: 140000,
    percentageBudgetExecution: 0.56,
    percentageProgress: 0.60,
    organizationId: '14',
    createdAt: subDays(new Date(), 90),
    updatedAt: new Date(),
  },
  {
    id: '15',
    name: 'Dashboard de Deportes Universitarios',
    description: 'Plataforma de análisis y estadísticas para equipos deportivos universitarios',
    type: ProjectType.DESARROLLO,
    status: ProjectStatus.EN_RIESGO,
    startDate: subDays(new Date(), 150),
    endDate: addDays(new Date(), 30),
    budget: 180000,
    cost: 160000,
    percentageBudgetExecution: 0.89,
    percentageProgress: 0.45,
    organizationId: '15',
    createdAt: subDays(new Date(), 150),
    updatedAt: new Date(),
  },
]

// Add organization references to projects
mockProjects.forEach(project => {
  project.organization = mockOrganizations.find(org => org.id === project.organizationId)
})

// KPIs (time series data for charts)
export const mockKPIs: KPI[] = [
  // Performance KPIs
  ...Array.from({ length: 12 }, (_, i) => ({
    id: `perf-${i}`,
    category: KPICategory.PERFORMANCE,
    name: 'Project Completion Rate',
    value: 0.82 + (Math.random() * 0.15),
    target: 0.85,
    unit: '%',
    period: subWeeks(new Date(), 11 - i).toISOString().slice(0, 10),
    createdAt: subWeeks(new Date(), 11 - i),
  })),
  
  // Quality KPIs
  ...Array.from({ length: 12 }, (_, i) => ({
    id: `qual-${i}`,
    category: KPICategory.QUALITY,
    name: 'Defect Rate',
    value: 0.03 + (Math.random() * 0.02),
    target: 0.02,
    unit: '%',
    period: subWeeks(new Date(), 11 - i).toISOString().slice(0, 10),
    createdAt: subWeeks(new Date(), 11 - i),
  })),
  
  // Adoption KPIs by Organization
  ...mockOrganizations.flatMap((org, orgIndex) => 
    Array.from({ length: 12 }, (_, i) => ({
      id: `adopt-${org.id}-${i}`,
      category: KPICategory.ADOPTION,
      name: 'Monthly Active Users',
      value: Math.floor(org.mau * (0.8 + Math.random() * 0.4)),
      unit: 'users',
      period: subWeeks(new Date(), 11 - i).toISOString().slice(0, 10),
      organizationId: org.id,
      createdAt: subWeeks(new Date(), 11 - i),
    }))
  ),
]

// Audit Logs
export const mockAuditLogs: LogAuditoria[] = [
  {
    id: '1',
    actor: 'ana.garcia@drimsoft.com',
    action: 'CREATE_PROJECT',
    entity: 'Project',
    entityId: '1',
    severity: AuditSeverity.MEDIUM,
    details: { projectName: 'Digital Transformation Initiative', organizationId: '1' },
    ipAddress: '192.168.1.100',
    userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
    createdAt: subDays(new Date(), 1),
  },
  {
    id: '2',
    actor: 'carlos.mendez@drimsoft.com',
    action: 'UPDATE_ORGANIZATION',
    entity: 'Organization',
    entityId: '2',
    severity: AuditSeverity.LOW,
    details: { field: 'status', oldValue: 'Activa', newValue: 'Activa' },
    ipAddress: '192.168.1.101',
    userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
    createdAt: subDays(new Date(), 2),
  },
  {
    id: '3',
    actor: 'system',
    action: 'FAILED_LOGIN',
    entity: 'Authentication',
    entityId: 'unknown',
    severity: AuditSeverity.HIGH,
    details: { email: 'suspicious@external.com', reason: 'Invalid domain' },
    ipAddress: '10.0.0.50',
    userAgent: 'curl/7.68.0',
    createdAt: subDays(new Date(), 3),
  },
  // Add more audit logs...
  ...Array.from({ length: 20 }, (_, i) => ({
    id: `audit-${i + 4}`,
    actor: mockUsers[i % mockUsers.length].email,
    action: ['VIEW_DASHBOARD', 'EXPORT_REPORT', 'UPDATE_PROJECT', 'VIEW_ORGANIZATION'][i % 4],
    entity: ['Dashboard', 'Report', 'Project', 'Organization'][i % 4],
    entityId: String((i % 5) + 1),
    severity: [AuditSeverity.LOW, AuditSeverity.MEDIUM][i % 2],
    details: { action: 'routine_access' },
    ipAddress: `192.168.1.${100 + (i % 10)}`,
    userAgent: 'Mozilla/5.0 (compatible browser)',
    createdAt: subDays(new Date(), i + 4),
  }))
]

// Mock Auth Response
export const mockAuthResponse: AuthResponse = {
  token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.mocktoken',
  refreshToken: 'refresh_token_mock',
  user: mockUsers[0],
  expiresAt: addDays(new Date(), 7),
}

// Dashboard KPIs
export const mockDashboardKPIs = {
  activeOrganizations: mockOrganizations.filter(org => org.status === OrganizationStatus.ACTIVA).length,
  activeProjects: mockProjects.filter(project => 
    [ProjectStatus.EN_CURSO, ProjectStatus.EN_REVISION].includes(project.status)
  ).length,
  averageProgress: mockProjects.reduce((sum, project) => sum + project.percentageProgress, 0) / mockProjects.length,
  openTickets: 23, // Mock value
  slaCompliance: 0.94,
  npsScore: 8.2,
  budgetUtilization: mockProjects.reduce((sum, project) => sum + project.percentageBudgetExecution, 0) / mockProjects.length,
  overdueDeliverables: 5, // Mock value
}